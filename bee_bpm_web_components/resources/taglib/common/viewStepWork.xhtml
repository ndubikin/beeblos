<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">

	<p class="fieldset_block_info_noBorder_noPadding_35px">
	
		<h:outputText value="#{msg.label_process}: " styleClass="label_form left_column_20" />
		<h:outputText id="step_work_name"
				value="#{wStepWorkFormBean.currentWStepWork.wProcessWork.name}"
				styleClass="data_form_bold"/>
		<br />
		<br />

		<h:outputText value="#{msg.label_step}: " styleClass="label_form left_column_20" />
		<h:outputText 
				value="#{wStepWorkFormBean.currentWStepWork.currentStep.name}"
				styleClass="data_form_bold" />
		<br />
		<br />

		<h:outputText value="#{msg.label_reference}: " styleClass="label_form left_column_20" />
		<h:outputText id="process_work_reference"
			value="#{wStepWorkFormBean.currentWStepWork.wProcessWork.reference}"
			styleClass="data_form_bold" />
		<br />
		
		<h:outputText value="#{msg.label_comments}: " styleClass="label_form left_column_20" />
		<h:outputText id="process_work_comments"
			value="#{wStepWorkFormBean.currentWStepWork.wProcessWork.comments}"
			styleClass="data_form_bold" />
		<br />
		<br />

		<h:outputText value="#{msg.label_arrived}: " styleClass="label_form left_column_20" />
		<h:outputText
			value="#{wStepWorkFormBean.currentWStepWork.arrivingDate}"
			styleClass="data_form_bold" >
			<f:convertDateTime pattern="#{msg.label_date_time_format}"
				timeZone="#{wStepWorkFormBean.timeZone}" />
		</h:outputText>
		<br />
		
		<h:outputText value="#{msg.label_from_step}: " styleClass="label_form left_column_20" />
		<h:outputText id="previous_step"
			value="#{wStepWorkFormBean.currentWStepWork.previousStep.name!=null and wStepWorkFormBean.currentWStepWork.previousStep.name!=''?wStepWorkFormBean.currentWStepWork.previousStep.name:'Starting workflow'}"
			styleClass="data_form_bold" />
		<h:outputText value=" #{msg.label_by}: " style="margin-left:10px;"
			rendered="#{wStepWorkFormBean.currentWStepWork.wProcessWork.insertUser != null}" />
		<h:outputText id="insert_user"
			value="#{wStepWorkFormBean.currentWStepWork.wProcessWork.insertUser}"
			styleClass="data_form_bold"
			style="margin-left:10px;"
			rendered="#{wStepWorkFormBean.currentWStepWork.wProcessWork.insertUser != null}" />
		<br />
		<br />

<ui:fragment rendered="#{wStepWorkFormBean.currentWStepWork.openedDate!=null}">
		<h:outputText value="#{msg.label_opened_date}: " styleClass="label_form left_column_20" />
		<h:outputText
			value="#{wStepWorkFormBean.currentWStepWork.openedDate}"
			styleClass="data_form_bold" >
			<f:convertDateTime pattern="#{msg.label_date_time_format}"
				timeZone="#{wStepWorkFormBean.timeZone}" />
		</h:outputText>
		<h:outputText value=" #{msg.label_by}: "
			rendered="#{wStepWorkFormBean.currentWStepWork.openedDate != null}" />
		<h:outputText id="opener_user"
			value="#{wStepWorkFormBean.currentWStepWork.openerUser.login}"
			styleClass="data_form_bold" 
			rendered="#{wStepWorkFormBean.currentWStepWork.openerUser != null}"/>
		<br />
</ui:fragment>		
<ui:fragment rendered="#{wStepWorkFormBean.currentWStepWork.openedDate eq null}">
	<h:outputText value="-" styleClass="label_form left_column_20" />
	<h:outputText value="#{msg.label_not_opened_yet} " styleClass="label_form_bold" />
</ui:fragment>

<ui:fragment rendered="#{wStepWorkFormBean.currentWStepWork.decidedDate!=null}">
		<h:outputText value="#{msg.label_decided_date}: " styleClass="label_form left_column_20" />
		<h:panelGroup>
			<h:outputText
				value="#{wStepWorkFormBean.currentWStepWork.decidedDate}"
				styleClass="data_form_bold" >
				<f:convertDateTime pattern="#{msg.label_date_time_format}"
					timeZone="#{wStepWorkFormBean.timeZone}" />
			</h:outputText>
			<h:outputText value=" #{msg.label_by}: "
				rendered="#{wStepWorkFormBean.currentWStepWork.decidedDate != null}" />
			<h:outputText id="performer_user"
				value="#{wStepWorkFormBean.currentWStepWork.performer.login} "
				styleClass="data_form_bold" 
				rendered="#{wStepWorkFormBean.currentWStepWork.performer != null}" />
		</h:panelGroup>
		<br />
</ui:fragment>
		
		<h:outputText value="#{msg.label_processed_by_administrator}"
			styleClass="data_form_bold" 
			rendered="#{wStepWorkFormBean.currentWStepWork.adminProcess}" />
		<br />

<ui:fragment rendered="#{wStepWorkFormBean.currentWStepWork.locked eq true}">
		<h:outputText value="#{msg.label_locked_by}: " styleClass="label_form left_column_20" />
		<h:panelGroup>
			<h:outputText value="#{wStepWorkFormBean.currentWStepWork.lockedBy.name}" 
				style="color: red; font-weight:bold; font-size:13px;"
            	rendered="#{wStepWorkFormBean.currentWStepWork.locked eq true and wStepWorkFormBean.currentWStepWork.lockedBy.id != workingProcessQueryBean.currentUserId}"/>
			<h:outputText value="#{msg.label_you}!" 
				style="color: green; font-weight:bold; font-size:13px;"
            	rendered="#{wStepWorkFormBean.currentWStepWork.locked eq true and wStepWorkFormBean.currentWStepWork.lockedBy.id eq workingProcessQueryBean.currentUserId}"/>		            				
			<h:outputText value=" #{msg.label_since}: "
				rendered="#{wStepWorkFormBean.currentWStepWork.lockedSince !=null}" />
			<h:outputText
				value="#{wStepWorkFormBean.currentWStepWork.lockedSince}"
				style="font-weight:bold; font-size:13px;"
				rendered="#{wStepWorkFormBean.currentWStepWork.lockedSince !=null}" >
				<f:convertDateTime pattern="#{msg.label_date_time_format}"
					timeZone="#{wStepWorkFormBean.timeZone}" />
			</h:outputText>
		</h:panelGroup>
</ui:fragment>		
		<br />

		<h:outputText value="#{msg.label_received_instructions}: " styleClass="label_form left_column_20" 
			rendered="#{wStepWorkFormBean.currentWStepWork.userInstructions != null}"/>
		<h:outputText
			value="#{wStepWorkFormBean.currentWStepWork.userInstructions}"
			styleClass="data_form_bold" 
			rendered="#{wStepWorkFormBean.currentWStepWork.userInstructions != null}">
		</h:outputText>
		<br />
		
		<h:outputText value="#{msg.label_sent_instructions}: " styleClass="label_form left_column_20"
			rendered="#{wStepWorkFormBean.currentWStepWork.nextStepInstructions != null}"/>
		<h:outputText
			value="#{wStepWorkFormBean.currentWStepWork.nextStepInstructions}"
			styleClass="data_form_bold"
			rendered="#{wStepWorkFormBean.currentWStepWork.nextStepInstructions != null}">
		</h:outputText>
		<br />		

	</p>
	<h:form id="w_view_step_work_form">
		<p class="fieldset_block_info_noBorder_noPadding_35px">
	
				<a4j:commandButton id="close_button_sr" value="#{msg.label_close}"
					action="#{wStepWorkFormBean.cancel}"
					onclick="javascript:Richfaces.hideModalPanel('mpViewStepWork')"
					style="width:80px; height:24px;"/>
	
			<br />
		</p>
	</h:form>
</ui:composition>

