<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:beecomp="http://www.beeblos.org/bee_bpm_web_components">

	<h:form id="w_process_def_data_fields_form" style="margin-left: 16px;">
	
		<rich:spacer height="20px"/>

		<h:panelGrid width="100%" columns="1">
   
			<rich:dataTable id="w_step_data_field"
				value="#{wStepDefFormBean.stepDataFieldList}"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				var="sdf" width="100%" columnClasses="center" rows="5"
				rendered="#{wStepDefFormBean.stepDataFieldListSize gt 0}">
			
				<f:facet name="header">
					<h:outputText value="#{msg.label_data_field}" />
				</f:facet>
	
				<rich:column sortBy="#{sdf.dataField.name}"
					style="width:250px; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_name}" />
					</f:facet>
					<h:outputText value="#{sdf.dataField.name}" />
				</rich:column>

			</rich:dataTable>

			<h:outputText value="#{msg.label_no_data_fields_related}" 
						rendered="#{wStepDefFormBean.currObjId != null and wStepDefFormBean.currObjId != 0 and wStepDefFormBean.stepDataFieldListSize eq 0}"
						style="font-weight: bold;"/>
						
	
			<rich:spacer height="10px"/>
	
			<h:panelGroup>
				<a4j:jsFunction name="onsubmitSearchDataField" action="#{wStepDefFormBean.updateDataFieldsRelated}"
					reRender="w_process_def_data_fields_form">
					<a4j:actionparam name="param1" assignTo="#{wStepDefFormBean.strDataFieldList}"  />
				</a4j:jsFunction>			
				<a4j:commandLink id="insert_user"
					title="#{msg.label_add_new_data_field_to_project}"
					action="#{dataFieldSelectorBean.loadInfoForDataField}"
					oncomplete="javascript:Richfaces.showModalPanel('mpSearchDataField', {titleParam: '#{msg.label_data_fields_involved_in_this_step}'});"
					reRender="mpSearchDataField"
					rendered="#{contextoSeguridad.permiteCualquiera['530'] and wStepDefFormBean.currentWStepDef != null}">
					<h:graphicImage id="imgInsertar" value="/images/insertar.png"
						style="border:0;" />
			 		<a4j:actionparam name="strUser" value="#{wStepDefFormBean.strDataFieldList}" assignTo="#{dataFieldSelectorBean.strDataFieldString}" />
			 		<a4j:actionparam name="processHeadId" value="#{wStepDefFormBean.currentProcessHeadId}" assignTo="#{dataFieldSelectorBean.processHeadId}" />
				</a4j:commandLink>
			</h:panelGroup>
	
	
						
		</h:panelGrid>

	</h:form>

</ui:composition>