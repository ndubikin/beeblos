<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich">


	<style type="text/css">
.colStyle1 {
	width: 150px;
	margin: 0px;
}

.colStyle2 {
	width: 300px;
	margin: 0px;
}

.colStyle2B {
	width: 300px;
	margin: 0px;
}

.colStyle3 {
	width: 20px;
	margin: 0px;
}

.colStyle4 {
	width: 150px;
	margin: 0px;
	
}
.colStyle5 {
	width: 300px;
	margin: 0px;
}
.colStyle6{
	width: 50px;
	margin: 0px;
}
.viewFilters {
	text-align: center; padding-left: 0px; font-size: 11px; cursor: pointer; color: #7795AF; font-family: Verdana; text-decoration: underline
}

.controlsEditorPanel {
	border : 0px; padding: 0px; margin :  0px 0px 0px 0px; overflow: auto; width: 100%;
}
</style>

<script language="VBScript">
	//Set WshNetwork = CreateObject("WScript.Network")

	//alert(WshNetwork.UserName)
	//document.frmUceHeader.userName.value = WshNetwork.UserName
	//document.frmUceHeader.computerName.value = WshNetwork.ComputerName
	//document.frmUceHeader.userDomain.value = WshNetwork.UserDomain

	
</script>

<script type="text/javascript">
	
	//alert("renderizando...");

	//var urlForAction = null;
    
	function confirmar() {		 
		
		var txtNombre = document.getElementById("frm_miUsuarioCuentasEmail:nombre");
			
		if( txtNombre.value == "" ){
			return false;
		}	  	
	
	  	var txtConfirm = String.fromCharCode(191)+"Est"+String.fromCharCode(225)+" seguro que desea eliminar el Indicador seleccionado"+String.fromCharCode(63);
		if (confirm(txtConfirm)) {			

			//alert(" urlForAction = " + urlForAction)
			/*
			A4J.AJAX.Submit('frmUceHeader',event,
							{'similarityGroupingId':'frmUceHeader:btnBorrar',
							 'parameters':{'frmUceHeader:btnBorrar':'frmUceHeader:btnBorrar'}, 
							 'actionUrl':urlForAction} );
			*/
			return true;
		}
		return false;
	}


	
	function submitFrmUceLista(){ 
		document.getElementById("frm_miUsuarioCuentasEmail:nombre").submit();
		
				
	} 
	

//-->
</script>


	<f:loadBundle basename="org.beeblos.bpm.wc.taglib.util.messages" var="msg" />

	<h:messages showDetail="true" showSummary="true"/>

	<rich:spacer></rich:spacer>

	<center><!-- ********************************* Gestion Cuentas de Email********************    -->

	<rich:panel style="width:100%"  >
		
			<rich:spacer height="10" />
		
		<h:form id="frm_miUsuarioCuentasEmail">
		
			<h:panelGrid id="exceptionsPnl"  rendered="#{exceptionBean.renderMessage}">
				<rich:dataTable value="#{exceptionBean.exceptionList}" var="exp" >
		            <rich:column> 
		                <f:facet name="header">	                    
		                </f:facet>	           
		                <h:graphicImage value="#{exp.imagePath}" />  	                     
		            </rich:column>
		            <rich:column> 
		                <f:facet name="header">
		                    <h:outputText value="#{msg.label_message}"/>
		                </f:facet>
		                <h:outputText value="#{exp.code} "/>
		                <h:outputText value="#{exp.message}"/>
		            </rich:column>	            
		            				
				</rich:dataTable>
			</h:panelGrid>

			<h:panelGrid columns="3" width="60%" >
											
				<h:outputText value="#{msg.label_nombre}" styleClass="labelForm" />
				<h:panelGroup>
					<h:inputHidden id="hddIdUce" value="#{miUsuarioCuentasEmailBean.idUsuarioCuentasEmail}">
						<a4j:support ajaxSingle="false"  action="#{miUsuarioCuentasEmailBean.cargarCurrentUsuarioCuentasEmail}"
							event="onchange" reRender="frm_miUsuarioCuentasEmail,usuarioCuentasEmailTable, nombre, btnGuardar, btnBorrar" />
					</h:inputHidden>
					<h:inputText id="nombre" value="#{miUsuarioCuentasEmailBean.currentUCE.uceNombre}"
						required="false"  style="width:250px"/>
				</h:panelGroup>
				
				<rich:spacer width="10" />
				
				<h:outputText value="#{msg.label_Direccion}" styleClass="labelForm" />
				<h:panelGroup>
					<h:inputText id="dir" value="#{miUsuarioCuentasEmailBean.currentUCE.uceEmail}"
						required="false"  style="width:250px"/>
				</h:panelGroup>
				<h:panelGroup>
				<rich:spacer width="10" />
	
				<h:commandButton id="btnGuardar" value="#{msg.label_guardar}"
					action="#{miUsuarioCuentasEmailBean.guardar}"/>			
						
				<rich:spacer width="10" />	
				<h:commandButton id="btnBorrar" value="#{msg.label_borrar}" 
					actionListener="#{miUsuarioCuentasEmailBean.borra}" onclick="return confirmar()"/>						
										
				</h:panelGroup>	
				
		<rich:spacer width="10" />
		<rich:spacer width="10" />	
				
		<h:panelGroup>
		
			<a4j:outputPanel styleClass="viewFilters" id="look">
				<rich:effect for="look" event="onclick" type="Fade" params="delay:0.0, duration:0.1" disableDefault="true"/>
				<rich:effect for="look" event="onclick" type="BlindDown" targetId="filtros" params="delay:0.1,duration:0.5,from:0.0,to:1.0"/>
				<rich:effect for="look" event="onclick" type="Appear"  targetId="filtros"  params="delay:0.1,duration:0.5,from:0.0,to:1.0" />
				<rich:effect for="look" event="onclick" type="Appear"  targetId="hide2"  params="delay:0.1,duration:0.5,from:0.0,to:1.0" />
				<h:outputText escape="false" value="#{msg.label_mostrarConfiguracion}" />
			</a4j:outputPanel>

			<a4j:outputPanel id="hide2" styleClass="viewFilters" style="display:none">
				<rich:effect for="hide2" event="onclick" type="BlindUp" targetId="filtros" params="id:'filtros', duration:0.5" />
				<rich:effect for="hide2" event="onclick" type="Appear" targetId="look" params="delay:0.2, duration:0.5" />
				<rich:effect for="hide2" event="onclick" type="Fade" targetId="hide2" params="delay:0.0, duration:0.2" />
				<h:outputText style="padding-right:5px" value="#{msg.label_ocultarConfiguracion}"/>
			</a4j:outputPanel>
		 </h:panelGroup>
		 
		</h:panelGrid>

		<h:panelGrid id="filtros" columns="1" style="width:60%; display:none;" >
			<h:panelGrid id="generales" columns="3" columnClasses="colStyle1,colStyle2B,colStyle3" >
				
				<h:outputText value="#{msg.label_cuentaPreferida}" styleClass="labelForm" />
				<h:selectBooleanCheckbox id="isPrefer" value="#{miUsuarioCuentasEmailBean.currentUCE.preferida}"
					required="false"  style="text-align:left"/>	
				<rich:spacer height="10" />
				
				<h:outputText value="#{msg.label_direccionRespuesta}" styleClass="labelForm" />
				<h:inputText id="dirResp" value="#{miUsuarioCuentasEmailBean.currentUCE.uceDireccionDeRespuesta}"
					required="false"  style=" width:250px"/>	
				<rich:spacer height="10" />
				
				<h:outputText id="lblFirmaTexto" value="#{msg.label_firma_texto}" styleClass="labelForm"/>
				<h:inputTextarea id="txtFirmaTexto" value="#{miUsuarioCuentasEmailBean.currentUCE.uceFirmaAdjuntaTxt}"
					required="false" style="width:600px; height:150px;"/>			
				<rich:spacer id="spcFirmaTexto" height="10"/>
				
				<h:outputText id="lblFirmaHtml" value="#{msg.label_firma_html}" styleClass="labelForm"/>
	            <h:panelGroup id="controlsFirmaHtml">
					<rich:editor id="txtFirmaHtml" configuration="#{editorBean.currentConfiguration}" 
								 width="600" height="150" viewMode="#{editorBean.viewMode}" 
								 value="#{miUsuarioCuentasEmailBean.currentUCE.uceFirmaAdjuntaHtml}" >
					</rich:editor>

	                <h:panelGrid columns="1">
	                    <h:selectOneRadio value="#{editorBean.viewMode}">
	                        <f:selectItem itemLabel="visualizado HTML" itemValue="visual" />
	                        <f:selectItem itemLabel="texto del HTML" itemValue="source" />
	                        <a4j:support event="onclick" reRender="txtFirmaHtml,controlsFirmaHtml" requestDelay="500"
	                            eventsQueue="settingsQueue" similarityGroupingId="settings" />
	                    </h:selectOneRadio>
	                </h:panelGrid>
				</h:panelGroup>
				<rich:spacer id="spcFirmaHtml" height="10"/>
				
			</h:panelGrid>
			
			<fieldset id="entrada" class="demo_fieldset" >
				<legend class="demo_legend"  >#{msg.label_servidorEntrada}</legend>
				<div>
				<h:panelGrid columns="4" columnClasses ="colStyle1,colStyle2,colStyle4,colStyle5" width="60%">			
					<h:outputText value="#{msg.label_nombre}" styleClass="labelForm" />
					<h:inputText id="nombreServEnt" value="#{miUsuarioCuentasEmailBean.currentUCE.nombreDelServidorEntrada}"
						required="false"  style="width:180px"/>
						
					<rich:spacer height="10" />
					<rich:spacer height="10" />	
				
					<h:outputText value="#{msg.label_puerto}" styleClass="labelForm" />
					<h:inputText id="puertoEnt" value="#{miUsuarioCuentasEmailBean.currentUCE.puertoEntrada}"
						required="false"  style="width:50px"/>
						
					<h:outputText value="#{msg.label_tipo}" styleClass="labelForm" />
					<h:inputText id="tipoServEnt" value="#{miUsuarioCuentasEmailBean.currentUCE.tipoServidorEntrada}"
						required="false"  style="width:50px"/>		
						
					<h:outputText value="#{msg.label_seguridadConexion}" styleClass="labelForm" />
					<h:inputText id="seguridadEnt" value="#{miUsuarioCuentasEmailBean.currentUCE.seguridadConexion}"
							required="false"  style="width:150px"/>	
						
					<h:outputText value="#{msg.label_metodoDeIdentificacion}" styleClass="labelForm" />
					<h:inputText id="metIdEnt" value="#{miUsuarioCuentasEmailBean.currentUCE.metodoIdentificacion}"
						required="false"  style="width:150px"/>			
		
				</h:panelGrid>
				</div>
			</fieldset>	
			
			<rich:spacer width="10" />
			
			<fieldset id="salida" class="demo_fieldset" >	 
				<legend class="demo_legend">#{msg.label_servidorSalida}</legend>
				<div>
					<h:panelGrid columns="4" columnClasses ="colStyle1,colStyle2,colStyle4,colStyle5" width="60%">
						
					<h:outputText value="#{msg.label_nombre}" styleClass="labelForm" />
					<h:inputText id="nombreServSal" value="#{miUsuarioCuentasEmailBean.currentUCE.nombreDelServidorEntrada}"
						required="false"  style="width:180px"/>
						
					<rich:spacer height="10" />	
					<rich:spacer height="10" />		
						
					<h:outputText value="#{msg.label_puerto}" styleClass="labelForm" />
					<h:inputText id="puertoSal" value="#{miUsuarioCuentasEmailBean.currentUCE.puertoSalida}"
						required="false"  style="width:50px"/>
						
					<rich:spacer height="10" />	
					<rich:spacer height="10" />		
				
					<h:outputText value="#{msg.label_seguridadConexion}" styleClass="labelForm" />
						
					<h:selectOneMenu id="seguridadSal" value="#{miUsuarioCuentasEmailBean.currentUCE.seguridadDeLaConexionSalida}" style="width:150px">
						<f:selectItems value="#{miUsuarioCuentasEmailBean.listaSeguridad}" />
					</h:selectOneMenu>	
											
					<h:outputText value="#{msg.label_metodoDeIdentificacion}" styleClass="labelForm" />
					<h:inputText id="metIdSal" value="#{miUsuarioCuentasEmailBean.currentUCE.metodoIdentificacionSalida}"
						required="false"  style="width:150px"/>		
													
					<h:outputText value="#{msg.label_usuario}" styleClass="labelForm" />
					<h:inputText id="usuarioSal" value="#{miUsuarioCuentasEmailBean.currentUCE.nombreUsuarioSalida}"
						required="false"  style="width:150px"/>
						
					<h:outputText value="#{msg.label_contraseña}" styleClass="labelForm" />
					<h:inputSecret id="passSal" value="#{miUsuarioCuentasEmailBean.currentUCE.contraseniaSalida}"
						required="false"  style="width:150px"/>
				
				</h:panelGrid>	
				</div>
			</fieldset>
		</h:panelGrid>

		<rich:spacer height="10" />

		<rich:panel style="width:98%">
			<rich:dataTable id="usuarioCuentasEmailTable" width="70%" 
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
								
				rows="5" styleClass="table" 
				value="#{miUsuarioCuentasEmailBean.listaUce}" var="uce" >
				
				 <a4j:support event="onRowClick" reRender="frm_miUsuarioCuentasEmail" action="#{miUsuarioCuentasEmailBean.cargarCurrentUsuarioCuentasEmail}">
                	<a4j:actionparam name="valor" value="#{uce.idUce}" assignTo="#{miUsuarioCuentasEmailBean.idUsuarioCuentasEmail}"/>
                </a4j:support>	
				
				<f:facet name="header">
					<h:outputText value="#{msg.label_cuentasDeCorreoDelUsuario}" />
				</f:facet>

	           	<rich:column  style="width:30px; text-align: left;"> 
	                <f:facet name="header">
	                    <h:outputText value="#{msg.label_id}"/>
	                </f:facet>
	                <h:outputText value="#{uce.idUce}"/>
	            </rich:column> 
	            
	            <rich:column  style="width:30px; text-align: left;"> 
	                <f:facet name="header">
	                    <h:outputText value="#{msg.label_cuentaPreferida}"/>
	                </f:facet>
	                <h:outputText value="#{uce.preferida ? msg.label_si : msg.label_no}"/>
	            </rich:column> 
	            
	           	<rich:column  style="width:200px; text-align: left;"> 
	                <f:facet name="header">
	                    <h:outputText value="#{msg.label_nombre}"/>
	                </f:facet>
	                <h:outputText value="#{uce.uceNombre}"/>
	            </rich:column>
	            	             
	            <rich:column  style="width:200px; text-align: left;"> 
	                <f:facet name="header">
	                    <h:outputText value="#{msg.label_Direccion}"/>
	                </f:facet>
	                <h:outputText value="#{uce.uceEmail}"/>
	            </rich:column>  
			</rich:dataTable>
			
			<rich:spacer height="10" />
			
			<rich:datascroller for="usuarioCuentasEmailTable" maxPages="10"  
				reRender="frm_miUsuarioCuentasEmail"/>
		
			<rich:spacer height="10" />
			
			<h:inputHidden id="sessionId" value="#{miUsuarioCuentasEmailBean.currentSession}"/>
		
		</rich:panel>
	</h:form>
	</rich:panel> 
	</center>

<script type="text/javascript">
	
	document.getElementById("frm_miUsuarioCuentasEmail:btnBorrar").disabled = true;
	//document.getElementById("frm_miUsuarioCuentasEmail:btnGuardar").disabled = true;
	//var currentSession = document.getElementById("frmUceLista:sessionId").value;
	
	//urlForAction = "/fgp_piloto/mantenimientos/uceCrud.jsf;jsessionid=" + currentSession;
</script>	

</ui:composition>


