<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core">

	<h:form id="w_process_def_data_fields_form${action}">

		<h:panelGrid width="100%" columns="1">

       		<rich:contextMenu attached="false" id="w_process_data_fields_menu" submitMode="ajax">
            	<rich:menuItem ajaxSingle="false" action="#{wProcessDefFormBean.loadDataField}"
            		reRender="w_process_def_data_fields_add_new${action}">
                	<b> Edit data field </b> {datafieldId} 
                	<a4j:actionparam name="det" assignTo="#{wProcessDefFormBean.wProcessDataFieldSelected.id}" value="{datafieldId}"/>
	           	</rich:menuItem>
           		<rich:menuItem ajaxSingle="true" action="#{wProcessDefFormBean.loadDataField}"
           			oncomplete="javascript:Richfaces.showModalPanel('mpDeleteDataField');"
            		reRender="mpDeleteDataField">
                	<b> Delete data field </b> {datafieldId} 
                	<a4j:actionparam name="det" assignTo="#{wProcessDefFormBean.wProcessDataFieldSelected.id}" value="{datafieldId}"/>
 	           	</rich:menuItem>
 	           	
            </rich:contextMenu>
            
		</h:panelGrid>

		<h:panelGrid width="100%" columns="1">

			<rich:dataTable id="w_process_def_data_fields_table"
				value="#{wProcessDefFormBean.dataFieldList}"
				onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
				onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
				var="dataField" width="98%" columnClasses="center" rows="10"
				reRender="dseDown" style="margin-left: 16px;">

				<f:facet name="header">
					<h:outputText value="#{msg.label_data_field_list_for_this_process}" />
				</f:facet>

				<rich:column sortBy="#{dataField.id}"
					style="width:10%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_id}" />
					</f:facet>
					<h:outputText value="#{dataField.id}" />
				</rich:column>

				<rich:column sortBy="#{dataField.name}"
					style="width:20%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_name}" />
					</f:facet>
					<h:outputText value="#{dataField.name}"/>
				</rich:column>

				<rich:column sortBy="#{dataField.required}"
					style="width:10%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_required}" />
					</f:facet>
					<h:outputText value="#{dataField.required ? msg.label_yes : ''}"/>
				</rich:column>

				<rich:column sortBy="#{dataField.dataType.name}"
					style="width:10%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_data_type}" />
					</f:facet>
					<h:outputText value="#{dataField.dataType.name}"/>
				</rich:column>

				<rich:column sortBy="#{dataField.length}"
					style="width:10%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_length}" />
					</f:facet>
					<h:outputText value="#{dataField.length}"/>
				</rich:column>

				<rich:column sortBy="#{dataField.comments}"
					style="width:30%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_comments}" />
					</f:facet>
					<h:outputText value="#{dataField.comments}"/>
				</rich:column>

				<rich:column sortBy="#{dataField.active}"
					style="width:10%; text-align: left;">
					<f:facet name="header">
						<h:outputText value="#{msg.label_active}" />
					</f:facet>
					<h:outputText value="#{dataField.active ? msg.label_yes : ''}"/>
				</rich:column>

				<rich:componentControl event="onRowClick" for="w_process_data_fields_menu"
					operation="show">
               		<f:param value="#{dataField.id}" name="datafieldId"/>
 				</rich:componentControl>

			</rich:dataTable>

			<rich:datascroller id="dseDown" for="w_process_def_step_sequence_table"
				maxPages="5" reRender="w_process_def_data_fields_form${action}"
				renderIfSinglePage="false" pageIndexVar="pageIndex" pagesVar="pages">

				<f:facet name="first">
					<h:outputText value="1..." />
				</f:facet>
				<f:facet name="last">
					<h:outputText value="...#{pages}" />
				</f:facet>
				<f:facet name="first_disabled">
					<h:outputText value="1..." />
				</f:facet>
				<f:facet name="last_disabled">
					<h:outputText value="... #{pages}" />
				</f:facet>
				<h:outputText value="#{pages}" />
			</rich:datascroller>

		</h:panelGrid>

	</h:form>

</ui:composition>