<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:a4j="http://richfaces.org/a4j"
	xmlns:rich="http://richfaces.org/rich"
	xmlns:c="http://java.sun.com/jstl/core"
	xmlns:beecomp="http://www.beeblos.org/bee_bpm_web_components">


	<h:form id="w_process_def_step_permissions_datafields" style="margin-left: 16px;">
	
		<h:panelGrid width="100%" columns="1">
		
			<rich:dataTable id="w_process_def_step_related_users_table"
					value="#{wStepDefFormBean.datafieldRelatedList}"
					onRowMouseOver="this.style.backgroundColor='#F1F1F1'"
					onRowMouseOut="this.style.backgroundColor='#{a4jSkin.tableBackgroundColor}'"
					var="stepDataField" width="100%" columnClasses="center" rows="5"
					reRender=""  
					rendered="#{wStepDefFormBean.datafieldRelatedListSize gt 0}">
	
					<f:facet name="header">
						<h:outputText value="#{msg.label_data_fields_with_permissions_for_this_step}" />
					</f:facet>
	
					<rich:column sortBy="#{stepDataField.name}"
						style="width:200px; text-align: left;">
						<f:facet name="header">
							<h:outputText value="#{msg.label_name}" />
						</f:facet>
						<h:outputText value="#{stepDataField.name}" />
					</rich:column>

					<rich:column sortBy="#{stepDataField.required}"
						style="width:200px; text-align: left;">
						<f:facet name="header">
							<h:outputText value="#{msg.label_rq}" />
						</f:facet>
						<h:outputText value="#{dataField.required ? msg.label_yes : ''}" />
					</rich:column>
	
			</rich:dataTable>
	
			<h:outputText value="#{msg.label_no_data_fields_related}" 
						rendered="#{wStepDefFormBean.datafieldRelatedListSize eq 0}"
						style="font-weight: bold;"/>
	
			<rich:spacer height="10px"/>
	
			<h:panelGroup>
				<a4j:commandLink id="insert_datafield"
					title="#{msg.label_add_new_data_field_to_project}"
					oncomplete="javascript:Richfaces.showModalPanel('mpSearchDataField', {titleParam: '#{msg.label_data_fields_involved_in_this_step}'});"
					reRender="mpSearchDataField"
					rendered="#{contextoSeguridad.permiteCualquiera['530'] and wStepDefFormBean.currentWStepDef != null}">
					<h:graphicImage id="imgInsertar3" value="/images/insertar.png"
						style="border:0;" />
				</a4j:commandLink>
			</h:panelGroup>

		</h:panelGrid>

	</h:form>

</ui:composition>